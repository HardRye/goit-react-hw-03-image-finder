(this["webpackJsonpgoit-react-hw-01-components"]=this["webpackJsonpgoit-react-hw-01-components"]||[]).push([[0],{11:function(e,t,a){e.exports={item:"ImageGalleryItem_item__3jvx3",itemImage:"ImageGalleryItem_itemImage__L8fmD"}},24:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__gfU-Y"}},25:function(e,t,a){e.exports={button:"Button_button__2xx0N"}},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),o=a(21),c=a.n(o),s=a(12),l=a(4),i=a(5),u=a(7),h=a(6),d=a(22),m=a.n(d),g=a(23),p=a.n(g),b="https://pixabay.com/api/?key=".concat("13135651-038714fd5931f83068ad66fd3","&image_type=photo&orientation=horizontal&per_page=12"),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return p.a.get("".concat(b,"&q=").concat(e,"&page=").concat(t))},j=function(e){return e.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}))},v=a(8),O=a.n(v),y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={input:""},e.handleSubmit=function(t){t.preventDefault();var a=e.state.input;(0,e.props.handleFormSubmit)(a),e.setState({input:""})},e.handleInput=function(t){var a=t.target;e.setState({input:a.value})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.input;return Object(n.jsx)("header",{className:O.a.searchBar,children:Object(n.jsxs)("form",{className:O.a.searchForm,onSubmit:this.handleSubmit,children:[Object(n.jsx)("button",{type:"submit",className:O.a.searchFormButton,children:Object(n.jsx)("span",{className:O.a.searchFormButtonLabel,children:"Search"})}),Object(n.jsx)("input",{type:"text",autoComplete:"off",placeholder:"Search images and photos",value:e,className:O.a.searchFormInput,onChange:this.handleInput})]})})}}]),a}(r.Component),_=a(11),x=a.n(_),L=function(e){var t=e.id,a=e.imageSrc,r=e.alt,o=e.handleLargeImage;return Object(n.jsx)("li",{className:x.a.item,"data-id":t,onClick:o,role:"presentation",children:Object(n.jsx)("img",{src:a,alt:r,className:x.a.itemImage})})},S=a(24),I=a.n(S),w=function(e){var t=e.photos,a=e.handleLargeImage;return Object(n.jsx)("ul",{className:I.a.imageGallery,children:t.map((function(e){return Object(n.jsx)(L,{id:e.id,imageSrc:e.webformatURL,alt:e.tags,handleLargeImage:a},e.id)}))})},F=a(9),M=a.n(F),N=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isModalOpen:!0},e.overlayRef=Object(r.createRef)(),e.componentDidMount=function(){window.addEventListener("keydown",e.handleKeyPress)},e.componentWillUnmount=function(){window.removeEventListener("keydown",e.handleKeyPress)},e.handleKeyPress=function(t){"Escape"===t.code&&e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{isModalOpen:!e.isModalOpen}})),e.props.handleModalClose()},e.handleOverlayClick=function(t){var a=e.overlayRef.current;a&&t.target!==a||e.toggleModal()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.largeImageURL,t=this.state.isModalOpen;return Object(n.jsx)(n.Fragment,{children:t&&Object(n.jsx)("div",{className:M.a.overlay,onClick:this.handleOverlayClick,ref:this.overlayRef,role:"presentation",children:Object(n.jsx)("div",{className:M.a.modal,children:Object(n.jsx)("img",{src:e,alt:"",className:M.a.img})})})})}}]),a}(r.Component),R=a(25),B=a.n(R),C=function(e){var t=e.handleLoadMoreButton;return Object(n.jsx)("button",{type:"button",className:B.a.button,onClick:t,children:"Load more"})},U=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={searchQuery:"",pageNumber:1,photos:[],largeImageURL:"",isLoader:!1,error:null},e.galleryRef=Object(r.createRef)(),e.handleFormSubmit=function(t){var a=e.state.searchQuery;t!==a&&f(t).then((function(a){var n=a.data;e.setState({pageNumber:1,searchQuery:t,photos:j(n.hits)})})).catch((function(t){return e.setState({error:t})})).finally((function(){e.handleScroll()}))},e.handleLoadMoreButton=function(){e.setState((function(e){return{pageNumber:e.pageNumber+1,isLoader:!0}}))},e.handleLargeImage=function(t){var a=t.currentTarget,n=e.state.photos,r=a.dataset.id,o=n.find((function(e){return e.id===Number(r)})).largeImageURL;e.setState({largeImageURL:o})},e.handleModalClose=function(){e.setState({largeImageURL:""})},e.handleScroll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;window.scrollTo({top:e,behavior:"smooth"})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state,r=n.searchQuery,o=n.pageNumber,c=this.galleryRef.current.scrollHeight;t.pageNumber!==o&&t.searchQuery===r&&f(r,o).then((function(e){var n=e.data;return a.setState((function(){return{photos:[].concat(Object(s.a)(t.photos),Object(s.a)(j(n.hits)))}}))})).catch((function(e){return a.setState({error:e})})).finally((function(){a.handleScroll(c),a.setState({isLoader:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.photos,a=e.largeImageURL,r=e.isLoader,o=e.error;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(y,{handleFormSubmit:this.handleFormSubmit}),t.length>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{ref:this.galleryRef,children:Object(n.jsx)(w,{photos:t,handleLargeImage:this.handleLargeImage})}),r&&Object(n.jsx)("div",{style:{margin:"0 auto",width:"80px"},children:Object(n.jsx)(m.a,{type:"Hearts",color:"#3f51b5",height:80,width:80})}),Object(n.jsx)(C,{handleLoadMoreButton:this.handleLoadMoreButton})]}),a.length>0&&Object(n.jsx)(N,{largeImageURL:a,handleModalClose:this.handleModalClose}),o&&Object(n.jsxs)("p",{children:["Whoops, something went wrong: ",o.message]})]})}}]),a}(r.Component),k=function(){return Object(n.jsx)(U,{})};a(69);c.a.render(Object(n.jsx)(k,{}),document.getElementById("root"))},8:function(e,t,a){e.exports={searchBar:"Searchbar_searchBar__2fFvO",searchForm:"Searchbar_searchForm__1lO2b",searchFormButton:"Searchbar_searchFormButton__36vaO",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__2iiKg",searchFormInput:"Searchbar_searchFormInput__3ZHAY"}},9:function(e,t,a){e.exports={overlay:"Modal_overlay__3YeCL",modal:"Modal_modal__3yepM",img:"Modal_img__yTOGJ"}}},[[70,1,2]]]);
//# sourceMappingURL=main.cfa098ee.chunk.js.map